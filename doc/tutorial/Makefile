############################################################
# file: Makefile (for tutorial)
# 	CORE Library version 1.4
# 	$Id: Makefile,v 1.1.1.1 2007/04/09 23:35:54 exact Exp $
############################################################

p=history
p=tut

############################################################
# targets
############################################################

tut tutorial:	appendix.tex appendix_b.tex tutorial.tex tutorial.bib
	latex tutorial
	dvips tutorial -o
	ps2pdf tutorial.ps tutorial.pdf

all:	tutorial history

his history: history.tex
	latex history
	dvips history -o
	ps2pdf history.ps history.pdf

tutorial.ps: tutorial.dvi
	dvips tutorial -o

tutorial.dvi tutorial.aux: tutorial.tex tutorial.bib
	latex tutorial
	bibtex tutorial
	latex tutorial

tutoriala4.tex:	tutorial.tex
	nawk 'BEGIN{FS="]"; \
		print "% THIS FILE IS AUTOMATICALLY GENERATED";\
		print "% FROM tutorial.tex. DO NOT MODIFY THIS."; }\
		/documentclass/ {\
		print "\\documentclass[12pt,a4]{article}"; }\
		!/documentclass/ {print;}\
         	END{}\
    		' tutorial.tex > tutoriala4.tex

ps:	tutorial.dvi 
	dvips tutorial -o

pspdf:	tutorial.ps
	ps2pdf tutorial.ps tutorial.pdf

############################################################
# make sure there is a .dvipsrc in the home directory
#	to use only type 1 font.
############################################################
pdf:	tutorial.tex tutoriala4.tex
	pdflatex tutorial
	pdflatex tutoriala4

a4 tuta4 tutoriala4.dvi tutoriala4.aux: tutoriala4.tex tutorial.bib
	latex tutoriala4
	bibtex tutoriala4
	latex tutoriala4

bib: tutorial.aux tutorial.bib
	bibtex tutorial

save:
	-mkdir RCS; ci -l -m"make save" *.tex Makefile README \
		*.bib

clean:
	-rm -f *.dvi *.log *.aux *.toc *.blg *pdf *.ps *.bbl

veryclean: clean
